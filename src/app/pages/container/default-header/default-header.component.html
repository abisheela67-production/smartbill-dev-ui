<header class="header">
  <!-- ================= TOP HEADER ================= -->
  <div class="top-header">
    <div class="left">
      <div class="brand">
        <span class="brand-text">SmartBill</span>
        <span class="brand-pro">Pro</span>
      </div>

      <div class="header-search">
        <i class="search-icon"></i>
        <input type="text" placeholder="Search modules (Ctrl+K)..." />
      </div>
    </div>

    <div class="right" *ngIf="isLoggedIn()">
      <div
        class="user-menu"
        [class.open]="userDropdownOpen"
        (click)="toggleUserDropdown($event)"
      >
        <div class="user-info">
          <span class="username">
            {{ getCurrentUserName() || "User" | titlecase }}
          </span>
          <span class="role">
            {{ getCurrentUserRole() || "Guest" | titlecase }}
          </span>
        </div>
        <lucide-angular
          name="chevron-down"
          class="dropdown-icon"
        ></lucide-angular>
      </div>

      <ul class="dropdown" *ngIf="userDropdownOpen">
        <li (click)="goToProfile()">
          <lucide-angular name="user"></lucide-angular>
          Profile
        </li>
        <li (click)="goToSettings()">
          <lucide-angular name="settings"></lucide-angular>
          Settings
        </li>
        <li (click)="logout()">
          <lucide-angular name="log-out"></lucide-angular>
          Logout
        </li>
      </ul>
    </div>
  </div>

<nav class="nav-bar">
  <ul class="nav-list">

    <li
      class="nav-item"
      *ngFor="let item of navItems"
      [class.open]="item.expanded"
      (mouseenter)="onMenuEnter(item)"
      (mouseleave)="onMenuLeave(item)"
    >

      <!-- ================= MENU WITHOUT CHILD ================= -->
      <a
        *ngIf="!item.children?.length"
        [routerLink]="item.route"
        class="nav-link"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <lucide-angular *ngIf="item.icon" [name]="item.icon"></lucide-angular>
        <span>{{ item.label }}</span>
      </a>

      <!-- ================= MENU WITH CHILD ================= -->
      <a
        *ngIf="item.children?.length"
        class="nav-link"
        (click)="onMenuClick(item, $event)"
      >
        <lucide-angular *ngIf="item.icon" [name]="item.icon"></lucide-angular>
        <span>{{ item.label }}</span>

        <lucide-angular
          name="chevron-down"
          class="submenu-icon"
        ></lucide-angular>
      </a>

      <!-- ================= SUB MENU ================= -->
      <ul *ngIf="item.children?.length" class="submenu">
        <li *ngFor="let sub of item.children">
          <a
            [routerLink]="sub.route"
            class="submenu-link"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: false }"
            (click)="$event.stopPropagation()"
          >
            <lucide-angular *ngIf="sub.icon" [name]="sub.icon"></lucide-angular>
            {{ sub.label }}
          </a>
        </li>
      </ul>

    </li>

  </ul>
</nav>



</header>
