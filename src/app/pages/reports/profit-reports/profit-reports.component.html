<div class="dashboard-container">

  <!-- HEADER -->
  <div class="dashboard-header">
    <lucide-icon name="trending-up"></lucide-icon>
    <div>
      <h2 class="dashboard-title">Profit Reports</h2>
      <p class="dashboard-subtitle">
        Item, Invoice & Day-wise profit analytics
      </p>
    </div>
  </div>

  <!-- FILTER BAR -->
  <div class="filter-section">
    <div class="filter-bar">

      <div class="filter-item">
        <label>From Date</label>
        <input type="date" [(ngModel)]="filters.fromDate" (change)="onFilterChange()" />
      </div>

      <div class="filter-item">
        <label>To Date</label>
        <input type="date" [(ngModel)]="filters.toDate" (change)="onFilterChange()" />
      </div>

      <div class="filter-item">
        <label>Company</label>
        <select [(ngModel)]="filters.companyId" (change)="onCompanyChange()">
          <option *ngFor="let c of companies" [ngValue]="c.companyID">
            {{ c.companyName }}
          </option>
        </select>
      </div>

      <div class="filter-item">
        <label>Branch</label>
        <select [(ngModel)]="filters.branchId" (change)="onFilterChange()">
          <option [ngValue]="null">All Branches</option>
          <option *ngFor="let b of branches" [ngValue]="b.branchID">
            {{ b.branchName }}
          </option>
        </select>
      </div>

      <div class="filter-item">
        <label>Report Type</label>
        <select [(ngModel)]="filters.reportType" (change)="onFilterChange()">
          <option value="ITEM">Item-wise</option>
          <option value="INVOICE">Invoice-wise</option>
          <option value="DAY">Day-wise</option>
        </select>
      </div>

    </div>
  </div>

  <!-- KPI -->
  <div class="kpi-grid">

    <div class="kpi-card kpi-blue">
      <lucide-icon name="shopping-cart"></lucide-icon>
      <span>Total Sales</span>
      <strong>₹ {{ totalSales | number:'1.2-2' }}</strong>
    </div>

    <div class="kpi-card kpi-orange">
      <lucide-icon name="package"></lucide-icon>
      <span>Total Cost</span>
      <strong>₹ {{ totalCost | number:'1.2-2' }}</strong>
    </div>

    <div class="kpi-card kpi-green">
      <lucide-icon name="trending-up"></lucide-icon>
      <span>Total Profit</span>
      <strong>₹ {{ totalProfit | number:'1.2-2' }}</strong>
    </div>

  </div>

  <!-- TABLE -->
  <app-view-datatable
    [data]="profitData"
    [columns]="columns"
    title="Profit Report"
    companyName="SMARTBILLPRO">
  </app-view-datatable>

</div>
