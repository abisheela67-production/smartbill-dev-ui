<div class="dashboard-container">
  <!-- ================= HEADER ================= -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <lucide-icon name="file-text" class="header-icon"></lucide-icon>
        <div class="header-text">
          <h2 class="dashboard-title">GST Reports</h2>
          <p class="dashboard-subtitle">
            GSTR-1 filing summary based on selected filters
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- ================= FILTER BAR ================= -->
  <div class="filter-section">
    <div class="filter-header">
      <h3 class="filter-title">Filter Options</h3>
    </div>
    <div class="filter-bar">
      <!-- FROM DATE -->
      <div class="filter-item">
        <label>From Date</label>
        <div class="input-wrapper">
          <lucide-icon name="calendar"></lucide-icon>
          <input
            type="date"
            [(ngModel)]="filters.fromDate"
            (change)="onFilterChange()"
          />
        </div>
      </div>

      <!-- TO DATE -->
      <div class="filter-item">
        <label>To Date</label>
        <div class="input-wrapper">
          <lucide-icon name="calendar"></lucide-icon>
          <input
            type="date"
            [(ngModel)]="filters.toDate"
            (change)="onFilterChange()"
          />
        </div>
      </div>

      <!-- COMPANY -->
      <div class="filter-item">
        <label>Company</label>
        <div class="select-wrapper">
          <select [(ngModel)]="filters.companyId" (change)="onCompanyChange()">
            <option *ngFor="let c of companies" [ngValue]="c.companyID">
              {{ c.companyName }}
            </option>
          </select>
          <lucide-icon name="chevron-down"></lucide-icon>
        </div>
      </div>

      <!-- BRANCH -->
      <div class="filter-item">
        <label>Branch</label>
        <div class="select-wrapper">
          <select [(ngModel)]="filters.branchId" (change)="onFilterChange()">
            <option [ngValue]="null">All Branches</option>
            <option *ngFor="let b of branches" [ngValue]="b.branchID">
              {{ b.branchName }}
            </option>
          </select>
          <lucide-icon name="chevron-down"></lucide-icon>
        </div>
      </div>

      <!-- GST TYPE -->
      <div class="filter-item">
        <label>GST Type</label>
        <div class="select-wrapper">
          <select [(ngModel)]="filters.gstFileType" (change)="onFilterChange()">
            <option value="B2B">B2B</option>
            <option value="B2C">B2C</option>
            <option value="HSN">HSN</option>
          </select>
          <lucide-icon name="chevron-down"></lucide-icon>
        </div>
      </div>
    </div>
  </div>

  <!-- ================= KPI CARDS ================= -->
  <div class="kpi-grid">
    <div class="kpi-card kpi-blue">
      <lucide-icon name="indian-rupee"></lucide-icon>
      <span>Total Invoice Value</span>
      <strong>₹ {{ totalInvoiceValue | number : "1.2-2" }}</strong>
    </div>

    <div class="kpi-card kpi-purple">
      <lucide-icon name="calculator"></lucide-icon>
      <span>Taxable Value</span>
      <strong>₹ {{ totalTaxableValue | number : "1.2-2" }}</strong>
    </div>

    <div class="kpi-card kpi-teal">
      <lucide-icon name="percent"></lucide-icon>
      <span>CGST</span>
      <strong>₹ {{ totalCGST | number : "1.2-2" }}</strong>
    </div>

    <div class="kpi-card kpi-orange">
      <lucide-icon name="percent"></lucide-icon>
      <span>SGST</span>
      <strong>₹ {{ totalSGST | number : "1.2-2" }}</strong>
    </div>

    <div class="kpi-card kpi-green">
      <lucide-icon name="percent"></lucide-icon>
      <span>IGST</span>
      <strong>₹ {{ totalIGST | number : "1.2-2" }}</strong>
    </div>

    <div class="kpi-card kpi-red">
      <lucide-icon name="receipt"></lucide-icon>
      <span>Total GST</span>
      <strong>₹ {{ totalGST | number : "1.2-2" }}</strong>
    </div>
  </div>

  <!-- ================= DATA TABLE ================= -->
  <div class="table-section">
    <div class="table-header">
      <div>
        <h3 class="table-title">GST Transactions</h3>
        <p class="table-subtitle">Detailed GSTR-1 filing records</p>
      </div>
      <div class="table-stats">
        <span class="stat-badge">
          <lucide-icon name="layers"></lucide-icon>
          Total Records: {{ gstData.length || 0 }}
        </span>
      </div>
    </div>
    <div class="table-wrapper">
      <app-view-datatable
        [data]="gstData"
        [columns]="columns"
        title="GST HSN Summary"
        companyName="SMARTBILLPRO"
      >
      </app-view-datatable>
    </div>
  </div>
</div>
