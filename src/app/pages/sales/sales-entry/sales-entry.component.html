<header class="pos-header">
  <!-- LEFT AREA -->
  <div class="header-left">
    <!-- Bag Icon -->
    <div class="icon-btn">
      <i class="ri-shopping-bag-3-line"></i>
    </div>

    <!-- Company Dropdown -->
    <select
      [(ngModel)]="selectedCompanyId"
      (ngModelChange)="onCompanyChange($event)"
      appFocusOnKey
      targetId="companyName"
      [autoFocus]="true"
    >
      <option *ngFor="let c of companies" [value]="c.companyID">
        {{ c.companyName }}
      </option>
    </select>

    <select [(ngModel)]="selectedBranchId" appFocusOnKey targetId="branchName">
      <option [ngValue]="null">-- Select Branch --</option>
      <option *ngFor="let b of branches" [value]="b.branchID">
        {{ b.branchName }}
      </option>
    </select>
  </div>

  <!-- CENTER SEARCH BAR -->
  <div class="header-center">SmartBillPro</div>

  <!-- RIGHT CONTROLS -->
  <div class="header-right">
    <!-- Hotkey Button -->
    <div class="segmented">
      <button
        [class.active]="gstType === 'IN_STATE'"
        (click)="gstType = 'IN_STATE'"
      >
        POS MODE
      </button>

      <button
        [class.active]="gstType === 'OTHER_STATE'"
        (click)="gstType = 'OTHER_STATE'"
      >
        HOTKEY MODE
      </button>
    </div>
  </div>
</header>

<div class="pos-wrapper">
  <div class="pos-left">
    <div class="billing-gst-row">
      <!-- Billing Type -->
      <div class="segmented">
        <button
          [class.active]="billingType === 'RETAIL'"
          (click)="billingType = 'RETAIL'"
        >
          RETAIL
        </button>

        <button
          [class.active]="billingType === 'WHOLESALE'"
          (click)="billingType = 'WHOLESALE'"
        >
          WHOLESALE
        </button>
      </div>

      <div class="segmented">
        <button
          [class.active]="gstType === 'IN_STATE'"
          (click)="gstType = 'IN_STATE'"
        >
          IN-STATE
        </button>

        <button
          [class.active]="gstType === 'OTHER_STATE'"
          (click)="gstType = 'OTHER_STATE'"
        >
          OTHER STATE
        </button>
      </div>
    </div>

    <!-- Product List Table -->
    <div class="product-table">
      <div class="popup-grid" *ngIf="smallGridVisible">
        <app-small-grid
          [columns]="productGridColumns"
          [data]="smallGridData"
        ></app-small-grid>
      </div>
      <div class="big-grid">
        <app-input-data-grid
          [columns]="visibleColumns"
          [data]="salesEntries"
          (numberChanged)="onGridNumberChanged($event)"
          (rowAdded)="onGridRowAdded($event)"
          [parent]="{
            branches: branches,
            companies: companies,
            categories: categories,
            subCategories: subCategories,
            brands: brands,
            units: units,
            hsnCodes: hsnCodes,
            taxes: taxes,
            cesses: cesses,
            suppliers: suppliers,
            statuses: statuses,
            showSmallGrid: showSmallGrid.bind(this)
          }"
          selectionMode="FullRowSelect"
          [allowUserToAddRows]="true"
          [allowUserToDeleteRows]="true"
          [allowUserToResizeColumns]="true"
        ></app-input-data-grid>
      </div>
    </div>
  </div>

  <!-- RIGHT SIDE -->
  <div class="pos-right">
    <!-- BILL TABS -->
    <div class="bill-tabs">
      <button class="active">Bill 1</button>
      <button class="add-tab">+</button>
    </div>

    <!-- BILLING OPTIONS CARD -->
    <div class="billing-card">
      <div class="customer-row">
        <label>Customer</label>
        <select>
          <option>Walk-in Customer -</option>
        </select>

        <label>Customer GSTIN</label>
        <input type="text" placeholder="Optional" />
      </div>
    </div>

    <!-- CART SECTION -->
    <div class="cart-section">
      <table>
        <thead>
          <tr>
            <th>Product</th>
            <th>Qty</th>
            <th>Price</th>
            <th>Total</th>
          </tr>
        </thead>
      </table>
    </div>

    <!-- TOTALS -->
    <div class="bill-summary">
      <div class="row"><span>Gross Amt:</span> <span>0.00</span></div>
      <div class="row discount"><span>Discount:</span> <span>- 0.00</span></div>
      <div class="row"><span>Taxable Amt:</span> <span>0.00</span></div>
      <div class="row"><span>GST:</span> <span>+ 0.00</span></div>
    </div>

    <!-- INVOICE TOTAL -->
    <h2 class="invoice-total">INVOICE TOTAL <span>₹0.00</span></h2>

    <!-- ACTION BUTTONS -->
    <div class="action-buttons">
      <button class="hold-btn">⏱ HOLD</button>

      <button class="complete-sale-btn">✓ COMPLETE SALE</button>
    </div>
  </div>
</div>
