<div class="top-controls">
  <label>Page Size:</label>
  <select [(ngModel)]="selectedPageSize">
    <option *ngFor="let s of pageSizes" [value]="s.value">
      {{ s.label }}
    </option>
  </select>

  <label>Orientation:</label>
  <select [(ngModel)]="orientation">
    <option value="portrait">Portrait</option>
    <option value="landscape">Landscape</option>
  </select>

  <button class="btn-download" (click)="downloadPDF()">Download PDF</button>
</div>

<div
  id="invoicePDF"
  class="invoice-container"
  [ngClass]="[
    selectedPageSize,
    orientation === 'landscape' ? 'landscape' : 'portrait'
  ]"
>
  <!-- HEADER -->
  <div class="header">
    <div class="left">
      <img class="logo" src="assets/logos/smartbilllogo.png" />

      <div class="company-block">
        <h2>{{ company.name }}</h2>
        <p>Email: {{ company.email }}</p>
        <p>Phone: {{ company.phone }}</p>
        <p>GSTIN: {{ company.taxId }}</p>
      </div>
    </div>

    <div class="right">
      <h1>INVOICE</h1>
      <p><strong>No:</strong> {{ invoice.number }}</p>
      <p><strong>Date:</strong> {{ invoice.date | date : "dd MMM yyyy" }}</p>
      <p><strong>Supply Place:</strong> {{ invoice.placeOfSupply }}</p>
    </div>
  </div>

  <hr />

  <!-- CUSTOMER -->
  <div class="customer">
    <h3>BILL TO</h3>
    <p>
      <strong>{{ customer.name }}</strong>
    </p>
    <p>{{ customer.address }}</p>
    <p>GSTIN: {{ customer.gstin }}</p>
  </div>

  <!-- ITEMS -->
  <table class="item-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Description</th>
        <th>HSN</th>
        <th>Qty</th>
        <th>Rate</th>
        <th>GST%</th>
        <th>GST Amt</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of invoice.items; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ item.name }}</td>
        <td>{{ item.hsn }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.rate | currency : "INR" }}</td>
        <td>{{ item.gstRate }}</td>
        <td>{{ item.gstAmount | currency : "INR" }}</td>
        <td>{{ item.total | currency : "INR" }}</td>
      </tr>
    </tbody>
  </table>

  <!-- TAX -->
  <div class="tax-box">
    <h3>TAX BREAKDOWN</h3>

    <table class="tax-table">
      <thead>
        <tr>
          <th>GST Rate</th>
          <th>Taxable</th>
          <th>GST Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tax of taxSummary">
          <td>{{ tax.rate }}%</td>
          <td>{{ tax.taxable | currency : "INR" }}</td>
          <td>{{ tax.taxAmount | currency : "INR" }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- SUMMARY -->
  <div class="summary">
    <p><strong>Subtotal:</strong> {{ summary.subTotal | currency : "INR" }}</p>
    <p><strong>Total GST:</strong> {{ summary.totalGST | currency : "INR" }}</p>
    <p>
      <strong>Total CESS:</strong> {{ summary.totalCESS | currency : "INR" }}
    </p>
    <p class="grand">
      <strong>Grand Total:</strong> {{ summary.grandTotal | currency : "INR" }}
    </p>
  </div>

  <!-- SIGN -->
  <div class="sign">
    <p>For {{ company.name }}</p>
    <p class="auth">AUTHORIZED SIGNATORY</p>
  </div>
</div>
