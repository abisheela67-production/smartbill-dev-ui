<div class="container-fluid">

  <!-- ================= MASTER HEADER ================= -->
<div class="master-header">

  <div class="mh-left">
    <div class="mh-icon">
      <lucide-icon name="building-2" size="22"></lucide-icon>
    </div>

    <div class="mh-title">
      <h2>Company Master</h2>
      <span>Enterprise Resource Planning</span>
    </div>
  </div>

  <div class="mh-right">

    <button class="mh-add-btn" (click)="resetForm()">
      <lucide-icon name="plus" size="16"></lucide-icon>
      Add Company
    </button>

    <div class="mh-total">
      <span>Total</span>
      <strong>{{ companies.length }}</strong>
    </div>

  </div>

</div>

  <div class="company-master-container form-container">
    <h2>Company Master</h2>

    <!-- ================= FORM (UNCHANGED) ================= -->
    <form class="company-form">
      <!-- 3-column fields -->
      <div class="form-grid">
        <!-- Column 1 -->
        <div class="form-column">
          <label>Company Name</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.companyName"
            name="companyName"
            required
            appFocusOnKey
            [autoFocus]="true"
            [autoSelectNext]="true"
            appInputRestrict="text"
          />

          <label>Phone</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.phone"
            name="phone"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="number"
          />

          <label>Alternate Phone</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.alternatePhone"
            name="alternatePhone"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="number"
          />

          <label>Email</label>
          <input
            type="email"
            class="input-common"
            [(ngModel)]="company.email"
            name="email"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="email"
          />

          <label>Website</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.website"
            name="website"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="text"
          />
        </div>

        <!-- Column 2 -->
        <div class="form-column">
          <label>Address Line 1</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.addressLine1"
            name="addressLine1"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="address"
          />

          <label>Address Line 2</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.addressLine2"
            name="addressLine2"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="address"
          />

          <label>Address Line 3</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.addressLine3"
            name="addressLine3"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="address"
          />

          <label>Address Line 4</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.addressLine4"
            name="addressLine4"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="address"
          />

          <label>City</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.city"
            name="city"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="letter"
          />

          <label>State</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.state"
            name="state"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="letter"
          />
        </div>

        <!-- Column 3 -->
        <div class="form-column">
          <label>Country</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.country"
            name="country"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="letter"
          />

          <label>Pincode</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.pincode"
            name="pincode"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="number"
          />

          <label>GST Number</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.gstNumber"
            name="gstNumber"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="text"
          />

          <label>PAN Number</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.panNumber"
            name="panNumber"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="text"
          />

          <label>CIN Number</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.cinNumber"
            name="cinNumber"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="text"
          />

          <label>Bank Name</label>
          <input
            type="text"
            class="input-common"
            [(ngModel)]="company.bankName"
            name="bankName"
            appFocusOnKey
            [autoSelectNext]="true"
            appInputRestrict="text"
          />
        </div>
      </div>

      <!-- Images & Checkbox -->
      <div class="form-grid">
        <div class="form-column">
          <label>Company Logo</label>
          <input
            type="file"
            class="file-common"
            (change)="onFileSelected($event, 'logo')"
            accept="image/*"
          />
          <img
            *ngIf="company.companyLogo"
            [src]="'data:image/png;base64,' + company.companyLogo"
            class="preview-image"
          />
        </div>

        <div class="form-column">
          <label>Company Image</label>
          <input
            type="file"
            class="file-common"
            (change)="onFileSelected($event, 'image')"
            accept="image/*"
          />
          <img
            *ngIf="company.companyImage"
            [src]="'data:image/png;base64,' + company.companyImage"
            class="preview-image"
          />
        </div>

        <div class="form-column checkbox-column">
          <label class="checkbox-common">
            <input
              type="checkbox"
              [(ngModel)]="company.isActive"
              name="isActive"
            />
            Is Active
          </label>
        </div>
      </div>

      <!-- Buttons -->
      <div class="form-actions">
        <button
          type="button"
          class="btn-common"
          (click)="saveOrDeleteCompany()"
        >
          Save / Update
        </button>
        <button type="button" class="btn-outline" (click)="resetForm()">
          Reset
        </button>
      </div>
    </form>

    <!-- ================= REUSABLE MASTER TABLE ================= -->

    <app-master-table-view
      [data]="companies"
      [columns]="companyColumns"
      title="Company List"
      companyName="SmartBillPro"
      (edit)="editCompany($event)"
      (delete)="deleteCompany($event)">
    </app-master-table-view>

  </div>
</div>
